{% extends "src/base.njk" %}

{% block head %}
<title>{{ title }}</title>
<link rel="stylesheet" href="/css/maingrid.css" type="text/css" />
{% endblock %}

{% block content %}

    <!-- Slider
		============================================= -->
		<section id="slider" class="slider-element" style="background-image:url('/elementos/PNUD 2-24.png');background-size:cover">
			<div class="container">
				<div class="row h-100 justify-content-start">
					<div class="col-lg-6 d-flex align-self-center flex-column pt-5 pb-3 py-lg-6 mb-0 my-lg-4 text-left">
						<h2 class="titulo_estadisticas" style="font-size:55px;font-weight: 800">7,469</h2>
						<br>
						<p class="titulo_estadisticas" style="font-size:30px;font-weight: 400!important">Migrantes Registrados</p>
						<br>
            <p class="titulo_estadisticas" style="font-size:30px;font-weight: 400!important">Datos: {{fuente}}</p>
						<br>
					</div>

				</div>
			</div>
			<!--div class="bg-alt py-5">
				<div class="container">
					<div class="d-flex">
						<h4 class="mb-0"><span class="counter counter-inherit fw-normal text-white"><i class="icon-line-users icon-fw"></i> <span class="color fw-semibold" data-from="100" data-to="12462" data-refresh-interval="150" data-speed="2000"></span> Members Registered.</span></h4>
						<h4 class="mb-0 ms-5"><span class="counter counter-inherit fw-normal text-white"><i class="icon-line-message-circle icon-fw"></i> <span class="color fw-semibold" data-from="100" data-to="340333" data-refresh-interval="100" data-speed="2000"></span> Posts Created.</span></h4>
					</div>
				</div>
			</div-->
		</section>
    
    <!-- estadisticas
		============================================= -->
		<section id="content px-4">
			<div class="content-wrap">

        <div class="container clearfix mt-6 my-4">
            <div class="row p-0 justify-content-center">
              <div class="col-lg-12 text-center">
                <h1 style="font-size:30px;color:#19486a!important">Movilidad Humana Guatemala - Esquipulas</h1>
              </div>
            </div>
          </div>

        <div class="container clearfix my-4">
          <div class="row p-0">
            <div class="tab my-4 p-0">
              <button class="tablinks btn" onclick="openTab(event, 'ano2020')" id="defaultOpen">2020</button>
              <button class="tablinks btn" onclick="openTab(event, 'ano2021')">2021</button>
            </div>
          </div>
        </div>

        <div id="ano2020" class="tabcontent" >
          <div class="container clearfix my-4">
            <div class="row">

              <div class="col-lg-4 center-c">
                <h1 id="numtotalstring" style="font-size:70px;color:#19486a!important">{{numeroregistrado}}</h1>
                <br>
                <p style="font-size:20px;font-weight: 400!important;color:#19486a!important">
                  Número de individuos en situación de movilidad Humana
                  registrados en esquipulas
                </p>
                <br>
                <p style="font-size:20px;font-weight: 400!important;color:#19486a!important">Datos: {{fuente}}</p>
                <br>
              </div>

              <div id="numtotal" style="display:none"></div>
              
              <div class="col-lg-4">
                <div>
                  <canvas id="sexo"></canvas>
                </div>   
              </div>

              <div class="col-lg-4 center-c">
                <p style="font-size:18px;font-weight: 600!important;color:#19486a!important">Sexo de la persona, según auto identificación</p>
                <br>
                <table class="tabla-estadisticas">
                  <tbody>
                    <tr>
                      <td class="d-flex"><img src="/elementos/iconos_estadisticas/PNUD 2-20.png" style="width:25px"><p class="tabla-p">Femenino</p></td>
                      <td>{{sexo[0].fem}}%</td>
                      <td id="numsexofem"></td>
                    </tr>
                    <tr>
                      <td class="d-flex"><img src="/elementos/iconos_estadisticas/PNUD 2-21.png" style="width:25px"><p class="tabla-p">Masculino</p></td>
                      <td>{{sexo[0].masc}}%</td>
                      <td id="numsexomasc"></td>
                    </tr>
                    <tr>
                      <td class="d-flex"><img src="/elementos/iconos_estadisticas/PNUD 2-22.png" style="width:25px"><p class="tabla-p">No Binario</p></td>
                      <td>{{sexo[0].nobi}}%</td>
                      <td id="numsexonobi"></td>
                    </tr>
                    <tr>
                      <td class="d-flex"><img src="/elementos/iconos_estadisticas/PNUD 2-23.png" style="width:25px"><p class="tabla-p">NS/NR</p></td>
                      <td>{{sexo[0].nsnr}}%</td>
                      <td id="numsexonsnr"></td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="col-lg-12 linea_azul"></div>

              <div class="col-lg-4">
                <div>
                  <canvas id="edad"></canvas>
                </div>   
              </div>

              <div class="col-lg-4">
                <div>
                  <canvas id="nacionalidad"></canvas>
                </div>   
              </div>

              <div class="col-lg-6">
                <div>
                  <canvas id="paisorigen"></canvas>
                </div>   
              </div>

              <div class="col-lg-6">
                <div>
                  <canvas id="paisdestino"></canvas>
                </div>   
              </div>

            </div>
          </div>
        </div>

        <div id="ano2021" class="tabcontent">
          <div class="container clearfix my-4">
            <div class="row">

              <div class="col-lg-4">
                <div>
                  tab 2
                </div>   
              </div>
              
              <div class="col-lg-4">
                <div>
                  <canvas id="sexo2"></canvas>
                </div>   
              </div>

              <div class="col-lg-4">
                <div>
                  <canvas id="edad2"></canvas>
                </div>   
              </div>

              <div class="col-lg-4">
                <div>
                  <canvas id="nacionalidad2"></canvas>
                </div>   
              </div>

              <div class="col-lg-6">
                <div>
                  <canvas id="paisorigen2"></canvas>
                </div>   
              </div>

              <div class="col-lg-6">
                <div>
                  <canvas id="paisdestino2"></canvas>
                </div>   
              </div>

            </div>
          </div>
        </div>

      </div>
    </section>


    <div id="sexofem" style="display:none">{{sexo[0].fem}}</div>
    <div id="sexomasc" style="display:none">{{sexo[0].masc}}</div>
    <div id="sexonobi" style="display:none">{{sexo[0].nobi}}</div>
    <div id="sexonsnr" style="display:none">{{sexo[0].nsnr}}</div>

    <div id="edad85mas" style="display:none">{{edad[0].85mas}}</div>
    <div id="edad11a17" style="display:none">{{edad[0].11a17}}</div>
    <div id="edadnsnr" style="display:none">{{edad[0].nsnr}}</div>
    <div id="edad0a10" style="display:none">{{edad[0].0a10}}</div>
    <div id="edad18a24" style="display:none">{{edad[0].18a24}}</div>
    <div id="edad55a64" style="display:none">{{edad[0].55a64}}</div>
    <div id="edad45a54" style="display:none">{{edad[0].45a54}}</div>
    <div id="edad35a44" style="display:none">{{edad[0].35a44}}</div>
    <div id="edad25a34" style="display:none">{{edad[0].25a34}}</div>
    <div id="edad75a84" style="display:none">{{edad[0].75a84}}</div>
    <div id="edad65a74" style="display:none">{{edad[0].65a74}}</div>

    <div id="naccol" style="display:none">{{nacionalidad[0].col}}</div>
    <div id="nacrepdom" style="display:none">{{nacionalidad[0].repdom}}</div>
    <div id="nachon" style="display:none">{{nacionalidad[0].hon}}</div>
    <div id="nacnsnr" style="display:none">{{nacionalidad[0].nsnr}}</div>
    <div id="nachai" style="display:none">{{nacionalidad[0].hai}}</div>
    <div id="nacotros" style="display:none">{{nacionalidad[0].otros}}</div>
    <div id="nacgua" style="display:none">{{nacionalidad[0].gua}}</div>
    <div id="nacecu" style="display:none">{{nacionalidad[0].ecu}}</div>
    <div id="nacsal" style="display:none">{{nacionalidad[0].sal}}</div>
    <div id="nacven" style="display:none">{{nacionalidad[0].ven}}</div>

    <div id="origencol" style="display:none">{{paisorigen[0].col}}</div>
    <div id="origenrepdom" style="display:none">{{paisorigen[0].repdom}}</div>
    <div id="origenhon" style="display:none">{{paisorigen[0].hon}}</div>
    <div id="origennsnr" style="display:none">{{paisorigen[0].nsnr}}</div>
    <div id="origenhai" style="display:none">{{paisorigen[0].hai}}</div>
    <div id="origenotros" style="display:none">{{paisorigen[0].otros}}</div>
    <div id="origengua" style="display:none">{{paisorigen[0].gua}}</div>
    <div id="origenecu" style="display:none">{{paisorigen[0].ecu}}</div>
    <div id="origensal" style="display:none">{{paisorigen[0].sal}}</div>
    <div id="origenven" style="display:none">{{paisorigen[0].ven}}</div>

    <div id="destinousa" style="display:none">{{paisdestino[0].usa}}</div>
    <div id="destinomex" style="display:none">{{paisdestino[0].mex}}</div>
    <div id="destinocan" style="display:none">{{paisdestino[0].can}}</div>
    <div id="destinonsnr" style="display:none">{{paisdestino[0].nsnr}}</div>
    <div id="destinootros" style="display:none">{{paisdestino[0].otros}}</div>

{% endblock %}

{% block body_javascripts %}
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.0.0/dist/chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    // Paso 1: Obtener el valor del primer div
    var stringDiv1 = document.getElementById("numtotalstring").innerText;

    // Paso 2: Eliminar caracteres no numéricos
    var cleanString = stringDiv1.replace(/[^0-9]/g, '');

    // Paso 3: Convertir a entero
    var intValue = parseInt(cleanString, 10);

    // Paso 4: Asignar el entero al segundo div
    document.getElementById("numtotal").innerText = intValue;
  </script>

  <script>
    var numtotal = document.getElementById("numtotal").innerText;

    var numsexofem = document.getElementById("sexofem").innerText;
    var numtotalsexofem = (numtotal * numsexofem) / 100
    document.getElementById("numsexofem").innerText = numtotalsexofem.toLocaleString();

    var numsexomasc = document.getElementById("sexomasc").innerText;
    var numtotalsexomasc = (numtotal * numsexomasc) / 100
    document.getElementById("numsexomasc").innerText = numtotalsexomasc.toLocaleString();

    var numsexonobi = document.getElementById("sexonobi").innerText;
    var numtotalsexonobi = (numtotal * numsexonobi) / 100
    document.getElementById("numsexonobi").innerText = numtotalsexonobi.toLocaleString();

    var numsexonsnr = document.getElementById("sexonsnr").innerText;
    var numtotalsexonsnr = (numtotal * numsexonsnr) / 100
    document.getElementById("numsexonsnr").innerText = numtotalsexonsnr.toLocaleString();
  </script>

  <script>
    // JavaScript para grafica de sexo


    var sexofem = parseInt(document.getElementById('sexofem').innerText);
    var sexomasc = parseInt(document.getElementById('sexomasc').innerText);
    var sexonobi = parseInt(document.getElementById('sexonobi').innerText);
    var sexonsnr = parseInt(document.getElementById('sexonsnr').innerText);

    var datos = {
      labels: ['Masculino', 'Femenino', 'No Binario', 'NS/NR'],
      datasets: [{
        data: [sexomasc, sexofem, sexonobi, sexonsnr],
        backgroundColor: ['#84B8DC', '#2A8BCF', '#0569B0', '#034675'],
      }]
    };

    var opciones = {
      scales: {
        xAxes: [{
            gridLines: {
              display: false
            }
        }],
        yAxes: [{
            gridLines: {
              display: false
            }
        }]
      },
      plugins: {
        legend: {
          display: true,
          position: 'right'
        },
        title: {
          display: false,
          text: 'Porcentaje de individuos según el Sexo',
          color: '#46495F',
          font: {
            size: 20
          }
        },
        tooltip: {
          callbacks: {
            label: function (context) {
              var value = context.raw;
              return ' ' + value + ' %';
            }
          }
        },
      },
    };

    var ctx = document.getElementById('sexo').getContext('2d');
    var miGrafica = new Chart(ctx, {
      type: 'doughnut',
      data: datos,
      options: opciones
    });
  </script>

  <script>
    // JavaScript para grafica de edad

    var edad85mas = parseInt(document.getElementById('edad85mas').innerText);
    var edad11a17 = parseInt(document.getElementById('edad11a17').innerText);
    var edadnsnr = parseInt(document.getElementById('edadnsnr').innerText);
    var edad0a10 = parseInt(document.getElementById('edad0a10').innerText);
    var edad18a24 = parseInt(document.getElementById('edad18a24').innerText);
    var edad55a64 = parseInt(document.getElementById('edad55a64').innerText);
    var edad45a54 = parseInt(document.getElementById('edad45a54').innerText);
    var edad35a44 = parseInt(document.getElementById('edad35a44').innerText);
    var edad25a34 = parseInt(document.getElementById('edad25a34').innerText);
    var edad75a84 = parseInt(document.getElementById('edad75a84').innerText);
    var edad65a74 = parseInt(document.getElementById('edad65a74').innerText);

    var datos = {
      labels: ['0-10 niñez', '11-17 adolescencia', '18-24 jóvenes adultos', '25-34 adultos', '35-44', '45-54', '55-64', '65-74 adultos mayores', '75-84', '85+', 'NS/NR'],
      datasets: [{
        data: [edad0a10, edad11a17, edad18a24, edad25a34, edad35a44, edad45a54, edad55a64, edad65a74, edad75a84, edad85mas, edadnsnr],
        backgroundColor: ['#84B8DC', '#2A8BCF', '#0569B0', '#034675', '#023F6A'],
      }]
    };

    var opciones = {
      scales: {
        xAxes: [{
            gridLines: {
              display: false
            }
        }],
        yAxes: [{
            gridLines: {
              display: false
            }
        }]
      },
      plugins: {
        legend: {
          display: true,
          position: 'right'
        },
        title: {
          display: true,
          text: 'Edad',
          color: '#46495F',
          font: {
            size: 20
          }
        },
        tooltip: {
          callbacks: {
            label: function (context) {
              var value = context.raw;
              return ' ' + value + ' %';
            }
          }
        },
      }
    };

    var ctx = document.getElementById('edad').getContext('2d');
    var miGrafica = new Chart(ctx, {
      type: 'doughnut',
      data: datos,
      options: opciones
    });
  </script>

  <script>
    // JavaScript para grafica de nacionaldiad

    var naccol = parseInt(document.getElementById('naccol').innerText);
    var nacrepdom = parseInt(document.getElementById('nacrepdom').innerText);
    var nachon = parseInt(document.getElementById('nachon').innerText);
    var nacnsnr = parseInt(document.getElementById('nacnsnr').innerText);
    var nachai = parseInt(document.getElementById('nachai').innerText);
    var nacotros = parseInt(document.getElementById('nacotros').innerText);
    var nacgua = parseInt(document.getElementById('nacgua').innerText);
    var nacecu = parseInt(document.getElementById('nacecu').innerText);
    var nacsal = parseInt(document.getElementById('nacsal').innerText);
    var nacven = parseInt(document.getElementById('nacven').innerText);

    var datos = {
      labels: ['Colombia', 'República Dominicana', 'Honduras', 'Haití', 'Guatemala', 'Ecuador', 'El Salvador', 'Venezuela', 'Otros', 'NS/NR'],
      datasets: [{
        data: [naccol, nacrepdom, nachon, nachai, nacgua, nacecu, nacsal, nacven, nacotros, nacnsnr],
        backgroundColor: ['#84B8DC', '#2A8BCF', '#0569B0', '#034675', '#023F6A'],
      }]
    };

    var opciones = {
      scales: {
        xAxes: [{
            gridLines: {
              display: false
            }
        }],
        yAxes: [{
            gridLines: {
              display: false
            }
        }]
      },
      plugins: {
        legend: {
          display: true,
          position: 'right'
        },
        title: {
          display: true,
          text: 'Nacionalidad',
          color: '#46495F',
          font: {
            size: 20
          }
        },
        tooltip: {
          callbacks: {
            label: function (context) {
              var value = context.raw;
              return ' ' + value + ' %';
            }
          }
        },
      }
    };

    var ctx = document.getElementById('nacionalidad').getContext('2d');
    var miGrafica = new Chart(ctx, {
      type: 'doughnut',
      data: datos,
      options: opciones
    });
  </script>

  <script>
    // JavaScript para grafica de pais de origen

    var origencol = parseInt(document.getElementById('origencol').innerText);
    var origenrepdom = parseInt(document.getElementById('origenrepdom').innerText);
    var origenhon = parseInt(document.getElementById('origenhon').innerText);
    var origennsnr = parseInt(document.getElementById('origennsnr').innerText);
    var origenhai = parseInt(document.getElementById('origenhai').innerText);
    var origenotros = parseInt(document.getElementById('origenotros').innerText);
    var origengua = parseInt(document.getElementById('origengua').innerText);
    var origenecu = parseInt(document.getElementById('origenecu').innerText);
    var origensal = parseInt(document.getElementById('origensal').innerText);
    var origenven = parseInt(document.getElementById('origenven').innerText);

    var datos = {
      labels: ['Colombia', 'República Dominicana', 'Honduras', 'Haití', 'Guatemala', 'Ecuador', 'El Salvador', 'Venezuela', 'Otros', 'NS/NR'],
      datasets: [{
        data: [origencol, origenrepdom, origenhon, origenhai, origengua, origenecu, origensal, origenven, origenotros, origennsnr],
        backgroundColor: ['#84B8DC', '#2A8BCF', '#0569B0', '#034675', '#023F6A'],
      }]
    };

    var opciones = {
      scales: {
        xAxes: [{
            gridLines: {
              display: false
            }
        }],
        yAxes: [{
            gridLines: {
              display: false
            }
        }]
      },
      plugins: {
        legend: {
          display: true,
          position: 'right'
        },
        title: {
          display: true,
          text: 'País de origen',
          color: '#46495F',
          font: {
            size: 20
          }
        },
        tooltip: {
          callbacks: {
            label: function (context) {
              var value = context.raw;
              return ' ' + value + ' %';
            }
          }
        },
      }
    };

    var ctx = document.getElementById('paisorigen').getContext('2d');
    var miGrafica = new Chart(ctx, {
      type: 'doughnut',
      data: datos,
      options: opciones
    });
  </script>

  <script>
    // JavaScript para grafica de pais de destino

    var destinousa = parseInt(document.getElementById('destinousa').innerText);
    var destinomex = parseInt(document.getElementById('destinomex').innerText);
    var destinocan = parseInt(document.getElementById('destinocan').innerText);
    var destinonsnr = parseInt(document.getElementById('destinonsnr').innerText);
    var destinootros = parseInt(document.getElementById('destinootros').innerText);


    var datos = {
      labels: ['Estados Unidos', 'México', 'Canada', 'Otros', 'NS/NR'],
      datasets: [{
        data: [destinousa, destinomex, destinocan, destinootros, destinonsnr],
        backgroundColor: ['#84B8DC', '#2A8BCF', '#0569B0', '#034675', '#023F6A'],
      }]
    };

    var opciones = {
      scales: {
        xAxes: [{
            gridLines: {
              display: false
            }
        }],
        yAxes: [{
            gridLines: {
              display: false
            }
        }]
      },
      plugins: {
        legend: {
          display: true,
          position: 'right'
        },
        title: {
          display: true,
          text: 'País de destino',
          color: '#46495F',
          font: {
            size: 20
          }
        },
        tooltip: {
          callbacks: {
            label: function (context) {
              var value = context.raw;
              return ' ' + value + ' %';
            }
          }
        },
      }
    };

    var ctx = document.getElementById('paisdestino').getContext('2d');
    var miGrafica = new Chart(ctx, {
      type: 'doughnut',
      data: datos,
      options: opciones
    });
  </script>


  <script>
  // Get the element with id="defaultOpen" and click on it
  document.getElementById("defaultOpen").click();
  function openTab(evt, cityName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(cityName).style.display = "block";
    evt.currentTarget.className += " active";
  }
  </script>

{% endblock %}